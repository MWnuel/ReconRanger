import psycopg2
import ipaddress
from datetime import datetime
import subprocess
import threading

conn = psycopg2.connect(
    host="IP",
    port='PORT',
    database="cern",
    user="USER",
    password="PW"
)

def make(network: ipaddress.IPv4Network, cur: psycopg2):
    for ip in network:
        query = "INSERT INTO ip (ip, ip_range, is_alive, last_check) VALUES (%s, %s, %s, %s)"
        values = (v1,v2,v3,v4)
        cur.execute(query, values)
        conn.commit()

t1 = threading.Thread(target=make, args=(ipaddress.IPv4Network, conn.cursor()))

t1.start()

t1.join()

conn.close()

print('Script finish')